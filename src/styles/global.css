@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens - light mode default (Rosie cream from less saturated vintage posters) */
@layer base {
  :root {
    --c-accent: 175 85 95;
    --c-accent-muted: 155 70 82;
    --c-surface: 250 245 232;
    --c-surface-elevated: 252 248 238;
    --c-muted: 100 100 100;
    --c-border: 220 212 195;
    --c-text: 20 20 20;
    --c-text-muted: 55 55 55;
    --c-github: 15 191 62;
    --c-linkedin: 10 102 194;
    /* Rosie the Riveter palette (more saturated) */
    --c-rosie-yellow: 235 210 120;
    --c-rosie-red: 185 70 80;
    --c-rosie-navy: 45 70 105;
    --c-rosie-navy-bright: 80 120 190;
    --c-rosie-orange: 230 120 50;
    --font-sans: 'DM Sans', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', ui-monospace, monospace;
    /* Card hover glow for light theme (between light and dark yellow) */
    --card-hover-shadow-light: 0 0 24px rgba(208, 182, 95, 0.33);
    --card-hover-shadow-red-light: 0 0 24px rgba(185, 70, 80, 0.28);
  }

  .language-card:hover,
  .platform-card:hover,
  .project-card:hover {
    box-shadow: var(--card-hover-shadow-light) !important;
    border-color: rgb(208, 182, 95) !important;
  }

  .tool-card:hover,
  .blog-card:hover {
    box-shadow: var(--card-hover-shadow-red-light) !important;
    border-color: rgb(var(--c-rosie-red)) !important;
  }

  /* Tech stack: active tab keeps border/glow when subcards are showing */
  .tech-tab.is-active.language-card,
  .tech-tab.is-active.platform-card {
    box-shadow: var(--card-hover-shadow-light) !important;
    border-color: rgb(208, 182, 95) !important;
    transition: box-shadow 0.25s ease-out, border-color 0.25s ease-out;
  }
  .tech-tab.is-active.tool-card {
    box-shadow: var(--card-hover-shadow-red-light) !important;
    border-color: rgb(var(--c-rosie-red)) !important;
    transition: box-shadow 0.25s ease-out, border-color 0.25s ease-out;
  }
  /* Glow fades completely by the time subcards finish sliding out */
  .tech-tab.is-active.tech-tab--glow-fade.language-card,
  .tech-tab.is-active.tech-tab--glow-fade.platform-card,
  .tech-tab.is-active.tech-tab--glow-fade.tool-card {
    box-shadow: none !important;
    border-color: rgb(var(--c-border)) !important;
  }

  .dark {
    --c-surface: 23 23 23;
    --c-surface-elevated: 38 38 38;
    --c-muted: 163 163 163;
    --c-border: 64 64 64;
    --c-text: 250 250 250;
    --c-text-muted: 163 163 163;
    /* Rosie palette (saturated poster) for dark theme */
    --c-rosie-yellow: 244 208 63;
    --c-rosie-red: 196 30 58;
    --c-rosie-navy: 27 54 93;
    --c-rosie-navy-bright: 100 150 220;
    --c-rosie-orange: 255 145 60;
    --c-accent: 196 30 58;
    --c-accent-muted: 216 45 70;
    /* Hero hexagon rivets - pure black in dark mode */
    --hex-stroke: rgb(0, 0, 0);
    --hex-fill: rgb(0, 0, 0);
    --hex-opacity: 1;
    /* Card hover glow for dark theme */
    --card-hover-shadow: 0 0 24px rgba(244, 208, 63, 0.22);
    --card-hover-shadow-red: 0 0 24px rgba(196, 30, 58, 0.3);
  }

  .dark .language-card,
  .dark .platform-card,
  .dark .project-card,
  .dark .tool-card,
  .dark .blog-card {
    transition: box-shadow 0.2s, border-color 0.2s, background-color 0.2s;
  }

  .dark .language-card:hover,
  .dark .platform-card:hover,
  .dark .project-card:hover {
    box-shadow: var(--card-hover-shadow) !important;
    border-color: rgb(var(--c-rosie-yellow)) !important;
    background-color: rgb(52 52 52) !important;
  }

  .dark .tool-card:hover,
  .dark .blog-card:hover {
    box-shadow: var(--card-hover-shadow-red) !important;
    border-color: rgb(var(--c-rosie-red)) !important;
    background-color: rgb(52 52 52) !important;
  }

  .dark .tech-tab.is-active.language-card,
  .dark .tech-tab.is-active.platform-card {
    box-shadow: var(--card-hover-shadow) !important;
    border-color: rgb(var(--c-rosie-yellow)) !important;
    background-color: rgb(52 52 52) !important;
    transition: box-shadow 0.25s ease-out, border-color 0.25s ease-out, background-color 0.25s ease-out;
  }
  .dark .tech-tab.is-active.tool-card {
    box-shadow: var(--card-hover-shadow-red) !important;
    border-color: rgb(var(--c-rosie-red)) !important;
    background-color: rgb(52 52 52) !important;
    transition: box-shadow 0.25s ease-out, border-color 0.25s ease-out, background-color 0.25s ease-out;
  }
  .dark .tech-tab.is-active.tech-tab--glow-fade.language-card,
  .dark .tech-tab.is-active.tech-tab--glow-fade.platform-card,
  .dark .tech-tab.is-active.tech-tab--glow-fade.tool-card {
    box-shadow: none !important;
    border-color: rgb(var(--c-border)) !important;
    background-color: rgb(var(--c-surface-elevated)) !important;
  }

  /* Dark theme: GitHub green, macOS moon silver */
  .dark .tool-card.icon-github svg {
    fill: rgb(var(--c-github)) !important;
  }

  .dark .platform-card.icon-apple svg,
  .dark .tool-card.icon-apple svg {
    fill: #c7c7cc !important;
  }

  /* Ubuntu: official brand orange #E95420 (design.ubuntu.com) */
  .platform-card.icon-ubuntu svg,
  .tool-card.icon-ubuntu svg {
    fill: #e95420 !important;
  }

  /* VMware: brand blue on dark backgrounds (Pantone 7461 C); target path to override inline fill */
  .dark .tool-card.icon-vmware svg path {
    fill: #0095D3 !important;
  }

  /* VMware: reduce padding and gap so icon can scale larger */
  .tech-stack-detail-grid > .tool-card.icon-vmware {
    padding: 0.25rem !important;
    gap: 0.25rem !important;
  }
  .tech-stack-detail-grid > .tool-card.icon-vmware > .shrink-0 {
    height: 2.75rem !important;
    width: 2.75rem !important;
  }

  /* PL/SQL: light gray cylinders in dark mode, darker gray in light mode (default) */
  .dark .language-card.icon-plsql img {
    filter: brightness(1.6) contrast(0.95);
  }

  /* PL/SQL: reduce padding and gap so icon can scale larger */
  .tech-stack-detail-grid > .language-card.icon-plsql {
    padding: 0.25rem !important;
    gap: 0.25rem !important;
  }
  .tech-stack-detail-grid > .language-card.icon-plsql > .shrink-0 {
    height: 2.75rem !important;
    width: 2.75rem !important;
  }

  /* Dark theme: Cursor purple brand color (AI section uses language-card) */
  .dark .language-card.icon-cursor svg {
    fill: #6b21a8 !important;
  }

  /* Tech stack sub cards: square aspect ratio, centered */
  .tech-stack-detail-grid {
    display: flex !important;
    flex-wrap: wrap;
    justify-content: center;
    gap: .75rem;
  }
  .tech-stack-detail-grid > * {
    aspect-ratio: 1 !important;
    min-height: 0 !important;
    width: 5.5rem !important;
    flex: 0 0 5.5rem;
    padding: 0.5rem !important;
  }
  /* Fixed icon size for all subcards: larger icons + aligned labels */
  .tech-stack-detail-grid > * > .shrink-0 {
    height: 2.25rem !important;
    width: 2.25rem !important;
  }
  .tech-stack-detail-grid > * span {
    font-size: 0.7rem;
    line-height: 1.1;
  }

  /* Tech stack subcard slide animations */
  .tech-stack-detail-grid.slide-out > * {
    animation: techSlideOut 0.25s ease-in forwards;
  }

  .tech-stack-detail-grid.slide-in > * {
    opacity: 0;
    transform: translateX(-12px);
    animation: techSlideIn 0.3s ease-out forwards;
  }

  .tech-stack-detail-grid.slide-in > *:nth-child(1) { animation-delay: 0ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(2) { animation-delay: 40ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(3) { animation-delay: 80ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(4) { animation-delay: 120ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(5) { animation-delay: 160ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(6) { animation-delay: 200ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(7) { animation-delay: 240ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(8) { animation-delay: 280ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(9) { animation-delay: 320ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(10) { animation-delay: 360ms; }
  .tech-stack-detail-grid.slide-in > *:nth-child(n+11) { animation-delay: 400ms; }

  @keyframes techSlideIn {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes techSlideOut {
    to {
      opacity: 0;
      transform: translateX(12px);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .tech-stack-detail-grid.slide-in > *,
    .tech-stack-detail-grid.slide-out > * {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-surface text-[rgb(var(--c-text))] antialiased;
  }
}

/* Component classes */
@layer components {
  .card {
    @apply rounded-xl border border-border bg-surface-elevated p-6 shadow-sm transition-shadow hover:shadow-md;
  }

  .btn-solid-red {
    @apply inline-flex items-center justify-center rounded-lg bg-rosie-red px-4 py-2 text-sm font-medium text-[rgb(var(--c-surface))] dark:text-white transition-all hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-rosie-red focus:ring-offset-2 focus:ring-offset-surface;
  }

  .btn-solid-yellow {
    @apply inline-flex items-center justify-center rounded-lg bg-rosie-yellow px-4 py-2 text-sm font-medium text-black transition-all hover:brightness-105 focus:outline-none focus:ring-2 focus:ring-rosie-yellow focus:ring-offset-2 focus:ring-offset-surface;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-lg border border-border bg-surface px-4 py-2 text-sm font-medium text-[rgb(var(--c-text))] transition-colors hover:bg-surface-elevated focus:outline-none focus:ring-2 focus:ring-border focus:ring-offset-2 focus:ring-offset-surface;
  }

  .btn-github {
    @apply inline-flex items-center justify-center gap-2 rounded-lg bg-[rgb(var(--c-github))] px-4 py-2 text-sm font-medium !text-white transition-colors hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--c-github))] focus:ring-offset-2 focus:ring-offset-surface;
  }

  .btn-linkedin {
    @apply inline-flex items-center justify-center gap-2 rounded-lg bg-[rgb(var(--c-linkedin))] px-4 py-2 text-sm font-medium !text-white transition-colors hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-[rgb(var(--c-linkedin))] focus:ring-offset-2 focus:ring-offset-surface;
  }

  .btn-solid-navy {
    @apply inline-flex items-center justify-center rounded-lg bg-rosie-navy px-4 py-2 text-sm font-medium !text-white transition-all focus:outline-none focus:ring-2 focus:ring-rosie-navy-bright focus:ring-offset-2 focus:ring-offset-surface;
    box-shadow: none;
    transition: background-color 0.2s ease-out, box-shadow 0.2s ease-out;
  }

  .btn-solid-navy:hover {
    background-color: rgb(var(--c-rosie-navy-bright));
    box-shadow: 0 0 16px rgb(var(--c-rosie-navy-bright) / 0.5);
  }

  .dark .btn-solid-navy:hover {
    box-shadow: 0 0 20px rgb(var(--c-rosie-navy-bright) / 0.55);
  }

  .badge {
    @apply inline-flex items-center rounded-full border border-border bg-surface-elevated px-2.5 py-0.5 text-xs font-medium text-muted;
  }

  .badge-featured {
    @apply border-2 border-rosie-navy-bright bg-rosie-navy-bright/15 px-2.5 py-0.5 text-rosie-navy-bright font-medium;
    box-shadow: 0 0 12px rgb(var(--c-rosie-navy-bright) / 0.4);
  }

  .dark .badge-featured {
    box-shadow: 0 0 16px rgb(var(--c-rosie-navy-bright) / 0.5);
  }

  /* Awards: persistent light-navy glow and border */
  .badge-award {
    @apply border-2 border-rosie-navy-bright bg-rosie-navy-bright/15 px-2.5 py-0.5 text-rosie-yellow font-medium;
    box-shadow: 0 0 12px rgb(var(--c-rosie-navy-bright) / 0.4);
  }

  .dark .badge-award {
    box-shadow: 0 0 16px rgb(var(--c-rosie-navy-bright) / 0.5);
  }

  .section-heading {
    @apply text-2xl font-semibold tracking-tight text-[rgb(var(--c-text))] md:text-3xl;
  }

  .section-heading-rosie {
    @apply section-heading border-l-4 border-rosie-navy pl-4 text-rosie-navy-bright;
  }

  /* Sticky section headings - stay visible when scrolling through content */
  .sticky-section-heading {
    @apply sticky top-0 z-10 py-4;
    background-color: rgb(var(--c-surface-elevated));
  }

  .sticky-section-heading--surface {
    background-color: rgb(var(--c-surface));
  }

  .banner-wip {
    @apply flex items-center justify-center gap-2 rounded-lg border-2 border-rosie-orange bg-rosie-orange/90 px-4 py-3 text-sm font-semibold text-white;
    box-shadow: 0 0 16px rgb(var(--c-rosie-orange) / 0.5);
  }

  .dark .banner-wip {
    @apply border-rosie-orange bg-rosie-orange/25 text-rosie-orange;
    box-shadow: 0 0 20px rgb(var(--c-rosie-orange) / 0.35);
  }

  .banner-wip__icon {
    @apply text-base;
  }

  .banner-wip__text {
    @apply tracking-tight;
  }

  /* LinkedIn card: orange border and glow only */
  .card-linkedin {
    @apply rounded-xl border-2 border-rosie-orange bg-surface-elevated p-6;
    box-shadow: 0 0 16px rgb(var(--c-rosie-orange) / 0.5);
  }

  .dark .card-linkedin {
    @apply border-rosie-orange bg-surface-elevated;
    box-shadow: 0 0 20px rgb(var(--c-rosie-orange) / 0.35);
  }

  .prose-custom {
    @apply prose prose-neutral dark:prose-invert max-w-none;
    @apply prose-headings:font-semibold prose-headings:tracking-tight;
    @apply prose-a:no-underline hover:prose-a:underline;
    /* Internal links default: red */
    @apply [&_a[href^="/"]]:!text-rosie-red [&_a[href^="/"]]:hover:!text-rosie-red;
    /* External links: bright navy (exclude branded buttons which use white text) */
    @apply [&_a[href^="http"]:not(.btn-github):not(.btn-linkedin)]:!text-rosie-navy-bright [&_a[href^="http"]:not(.btn-github):not(.btn-linkedin)]:hover:!text-rosie-navy-bright;
    /* Internal blog links: red (explicit) */
    @apply [&_a[href^="/blog/"]]:!text-rosie-red [&_a[href^="/blog/"]]:hover:!text-rosie-red;
    /* Internal project links: yellow (overrides default) */
    @apply [&_a[href^="/projects/"]]:!text-rosie-yellow [&_a[href^="/projects/"]]:hover:!text-rosie-yellow;
    @apply [&_a.btn-github]:!text-white [&_a.btn-linkedin]:!text-white;
    @apply [&_a.btn-solid-red]:!text-[rgb(var(--c-surface))] dark:[&_a.btn-solid-red]:!text-white;
    @apply [&_a.btn-solid-yellow]:!text-black;
    @apply prose-code:rounded prose-code:bg-surface-elevated prose-code:px-1.5 prose-code:py-0.5 prose-code:before:content-none prose-code:after:content-none;
    @apply prose-pre:rounded-xl prose-pre:border prose-pre:border-border;
  }

  /* Light mode: improve code block readability on cream background (dark block for contrast) */
  :root:not(.dark) .prose-custom pre {
    background-color: rgb(45 55 72) !important;
    color: rgb(226 232 240) !important;
    border-color: rgb(55 65 81) !important;
  }

  :root:not(.dark) .prose-custom pre code {
    background-color: transparent !important;
    color: inherit !important;
  }
}

/* Reveal animation - respects reduced motion */
@layer utilities {
  .reveal {
    @apply opacity-0 transition-all duration-700 ease-out;
  }

  .reveal--visible {
    @apply opacity-100;
  }

  @media (prefers-reduced-motion: reduce) {
    .reveal {
      @apply opacity-100 transition-none;
    }
  }

  .reveal--visible.reveal--animate-up {
    animation: fadeUp 0.65s ease-out forwards;
  }

  .reveal--visible.reveal--animate-down {
    animation: fadeDown 0.65s ease-out forwards;
  }

  /* Re-enter animations: no opacity change, avoids flicker */
  .reveal--visible.reveal--animate-up-subtle {
    animation: slideUpSubtle 0.55s ease-out forwards;
  }

  .reveal--visible.reveal--animate-down-subtle {
    animation: slideDownSubtle 0.55s ease-out forwards;
  }

  /* Exit animations: slide out when leaving viewport */
  .reveal.reveal--exit-up {
    transform: translateY(-48px);
  }

  .reveal.reveal--exit-down {
    transform: translateY(48px);
  }

  /* Mobile: more pronounced reveal (larger movement, longer duration) for visibility on small screens */
  @media (max-width: 767px) {
    .reveal--visible.reveal--animate-up {
      animation: fadeUpMobile 0.8s ease-out forwards;
    }
    .reveal--visible.reveal--animate-down {
      animation: fadeDownMobile 0.8s ease-out forwards;
    }
    .reveal.reveal--exit-up {
      transform: translateY(-64px);
    }
    .reveal.reveal--exit-down {
      transform: translateY(64px);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .reveal--visible.reveal--animate-up,
    .reveal--visible.reveal--animate-down,
    .reveal--visible.reveal--animate-up-subtle,
    .reveal--visible.reveal--animate-down-subtle {
      animation: none;
    }
    .reveal.reveal--exit-up,
    .reveal.reveal--exit-down {
      transform: none;
    }
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(48px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeDown {
    from {
      opacity: 0;
      transform: translateY(-48px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideUpSubtle {
    from {
      opacity: 1;
      transform: translateY(28px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideDownSubtle {
    from {
      opacity: 1;
      transform: translateY(-28px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeUpMobile {
    from {
      opacity: 0;
      transform: translateY(64px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeDownMobile {
    from {
      opacity: 0;
      transform: translateY(-64px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

}
