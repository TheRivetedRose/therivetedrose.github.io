---
import RevealOnScroll from './RevealOnScroll.astro';

interface Props {
  slug: string;
  title: string;
  summary: string;
  pubDate: Date;
  updatedDate?: Date;
  tags: string[];
}

const { slug, title, summary, pubDate, updatedDate, tags } = Astro.props;
const href = `/blog/${slug}/`;
const dateOpts: Intl.DateTimeFormatOptions = { year: 'numeric', month: 'short', day: 'numeric' };
const formattedPubDate = pubDate.toLocaleDateString('en-US', dateOpts);
const formattedUpdatedDate = updatedDate?.toLocaleDateString('en-US', dateOpts);
const showUpdated = updatedDate && updatedDate.getTime() !== pubDate.getTime();
---

<RevealOnScroll>
      <a href={href} class="card blog-card block text-left transition-transform hover:-translate-y-0.5">
    <p class="mb-2 flex flex-wrap justify-between gap-x-2 gap-y-1 text-xs text-muted">
      <span><span class="font-medium">Published:</span> {formattedPubDate}</span>
      {showUpdated && formattedUpdatedDate && (
        <span><span class="font-medium">Updated:</span> {formattedUpdatedDate}</span>
      )}
    </p>
    <h3 class="mb-2 text-lg font-semibold text-[rgb(var(--c-text))]">{title}</h3>
    <p class="mb-4 text-sm text-muted line-clamp-2">{summary}</p>
    <div class="flex flex-wrap gap-2">
      {tags.map((tag) => (
        <span class="badge">{tag}</span>
      ))}
    </div>
  </a>
</RevealOnScroll>
